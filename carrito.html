<div id="carrito">
  <span>Carrito: </span>
  <span id="contador">0</span> <!-- Contador del carrito -->
  <div id="productosCarrito" style="display: none; position: absolute; background: white; border: 1px solid #ccc; padding: 10px;">
    <!-- Aquí se cargarán los productos -->
  </div>
</div>

<script>
  const carritoDiv = document.getElementById('carrito');
  const productosCarrito = document.getElementById('productosCarrito');
  const contador = document.getElementById('contador');

  // Inicializa el contador del carrito al cargar la página
  document.addEventListener('DOMContentLoaded', () => {
    actualizarCarrito();
  });

  carritoDiv.addEventListener('mouseenter', () => {
    actualizarVistaCarrito();
    productosCarrito.style.display = 'block';
  });

  carritoDiv.addEventListener('mouseleave', () => {
    productosCarrito.style.display = 'none';
  });

  function actualizarCarrito() {
    const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
    contador.textContent = carrito.length;
  }

  function actualizarVistaCarrito() {
    const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
    if (carrito.length === 0) {
      productosCarrito.innerHTML = '<p>El carrito está vacío.</p>';
    } else {
      productosCarrito.innerHTML = carrito.map(p => `
        <div style="margin-bottom: 5px;">
          <span>${p.nombre}</span> - <span>$${p.precio}</span>
          <button onclick="eliminarProducto('${p.nombre}')">Eliminar</button>
        </div>
      `).join('');
    }
  }

  function eliminarProducto(nombre) {
    let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
    carrito = carrito.filter(p => p.nombre !== nombre);
    localStorage.setItem('carrito', JSON.stringify(carrito));
    actualizarCarrito();
    actualizarVistaCarrito();
  }
</script>
